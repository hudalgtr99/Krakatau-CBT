<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Kelasstatus extends CI_Controller { public function __construct() { goto miT1n; ysoYA: redirect("\x61\x75\x74\150"); goto n2XkG; n2XkG: e8QJ9: goto N0kru; h2lfS: $this->load->model("\x44\x61\163\150\142\157\141\162\x64\137\x6d\157\x64\145\x6c", "\x64\x61\163\x68\142\x6f\x61\x72\x64"); goto tqAnz; RDyEu: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\165\x72\165"))) { goto tqCrt; } goto J2uv0; tqAnz: $this->load->model("\x44\162\157\x70\x64\x6f\167\156\x5f\x6d\x6f\144\145\x6c", "\x64\162\157\160\144\x6f\167\156"); goto aUmDz; srJsI: if (!$this->ion_auth->logged_in()) { goto ZoAGE; } goto RDyEu; jQgst: goto e8QJ9; goto zJDp8; zJDp8: ZoAGE: goto ysoYA; J2uv0: show_error("\x48\141\x6e\x79\x61\x20\x41\144\155\x69\156\151\x73\164\162\x61\x74\157\x72\40\171\141\156\147\x20\144\151\142\145\162\151\x20\150\x61\x6b\x20\165\156\164\x75\x6b\40\155\x65\x6e\x67\x61\153\163\145\163\x20\x68\141\154\141\x6d\141\156\x20\x69\x6e\151\54\x20\x3c\x61\40\150\162\145\x66\x3d\42" . base_url("\144\x61\x73\x68\x62\x6f\141\x72\x64") . "\x22\76\113\145\155\x62\x61\154\x69\40\153\x65\40\x6d\145\156\165\40\x61\167\x61\154\74\57\141\x3e", 403, "\x41\153\x73\145\x73\x20\124\145\162\154\x61\x72\141\156\x67"); goto SVUrR; miT1n: parent::__construct(); goto srJsI; aUmDz: $this->load->model("\113\x65\154\x61\x73\137\155\x6f\144\x65\x6c", "\x6b\x65\154\141\x73"); goto MR0uL; MR0uL: $this->form_validation->set_error_delimiters('', ''); goto jcPrm; N0kru: $this->load->library(["\144\141\x74\141\x74\141\x62\x6c\x65\x73", "\x66\157\162\x6d\137\x76\x61\154\x69\x64\141\x74\151\157\156"]); goto a_xa5; a_xa5: $this->load->model("\x4d\x61\163\x74\145\x72\x5f\155\x6f\x64\145\154", "\x6d\x61\x73\x74\x65\162"); goto h2lfS; SVUrR: tqCrt: goto jQgst; jcPrm: } public function output_json($data, $encode = true) { goto h9m39; kalft: WNF6w: goto smrEZ; smrEZ: $this->output->set_content_type("\141\160\x70\x6c\151\x63\141\164\151\157\156\x2f\x6a\x73\x6f\x6e")->set_output($data); goto zyFON; h9m39: if (!$encode) { goto WNF6w; } goto X1JO1; X1JO1: $data = json_encode($data); goto kalft; zyFON: } public function index() { goto FAF2B; AIG_g: zn5zg: goto r9DM5; lIMcO: VhNl9: goto PbjdH; RdYlL: $nguru[$guru->id_guru] = $guru->nama_guru; goto LMDiU; HFyzv: $this->load->view("\x6b\x65\154\141\163\57\163\x74\141\164\165\163\57\144\141\x74\141"); goto yL1Te; q4xsh: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto RdYlL; xed0i: $data["\153\x65\154\x61\163"] = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto omcP5; dCNlz: $data["\x6b\x65\154\x61\163"] = $arrKelas; goto h6ilB; eIrfk: foreach ($mapel as $m) { goto VICEP; ld5bC: WIXBe: goto jRYNk; jRYNk: Ni7hh: goto OrvEI; VICEP: $arrMapel[$m->id_mapel] = $m->nama_mapel; goto y8k2s; y8k2s: foreach ($m->kelas_mapel as $kls) { $arrKelas[$kls->kelas] = $this->dropdown->getNamaKelasById($tp->id_tp, $smt->id_smt, $kls->kelas); Gvss0: } goto ld5bC; OrvEI: } goto kSH9G; oFUYS: $tp = $this->dashboard->getTahunActive(); goto xMHPq; bxvnJ: $data = ["\x75\163\145\x72" => $user, "\x6a\165\144\x75\x6c" => "\x4e\x69\154\x61\x69\x20\x48\141\x72\151\141\156\x20\123\x69\x73\167\141", "\x73\165\x62\x6a\165\144\165\154" => "\x4e\x69\154\x61\151", "\x73\145\164\164\x69\x6e\x67" => $this->dashboard->getSetting()]; goto oFUYS; zOxoU: $arrId = []; goto d0_CJ; JCuM0: $data["\x74\x70\x5f\141\143\x74\x69\166\145"] = $tp; goto W8B3B; c70rM: $data["\x73\x6d\x74\137\141\143\164\151\x76\145"] = $smt; goto O69vo; vUHOZ: $mapel = json_decode(json_encode(unserialize($mapel_guru->mapel_kelas))); goto NIJPN; F2oqk: e3me4: goto AIG_g; KtU7I: $mapel_guru = $this->kelas->getGuruMapelKelas($guru->id_guru, $tp->id_tp, $smt->id_smt); goto vUHOZ; BSyIS: $this->load->view("\153\145\154\141\x73\x2f\163\x74\x61\x74\165\x73\x2f\x64\141\x74\x61"); goto idjVz; L0XIE: aIcdh: goto y_h8c; kSH9G: T3cgG: goto rOjSi; XrPLt: $arrKelas = []; goto U2eAS; U2eAS: if (!($mapel != null)) { goto Z_etv; } goto eIrfk; xMHPq: $smt = $this->dashboard->getSemesterActive(); goto ayAwt; FAF2B: $user = $this->ion_auth->user()->row(); goto bxvnJ; CASBc: $data["\x67\165\x72\165\163"] = $nguru; goto QPX6y; h6ilB: $this->load->view("\x6d\x65\x6d\x62\x65\x72\163\57\147\x75\x72\x75\57\x74\x65\155\x70\x6c\x61\x74\145\163\x2f\150\x65\141\144\145\162", $data); goto BSyIS; yL1Te: $this->load->view("\137\x74\x65\x6d\160\x6c\141\x74\x65\x73\57\144\x61\x73\150\x62\157\x61\x72\x64\57\x5f\x66\x6f\x6f\x74\145\x72"); goto lIMcO; y_h8c: $data["\160\162\x6f\x66\x69\154\x65"] = $this->dashboard->getProfileAdmin($user->id); goto EKQvD; NIJPN: $arrMapel = []; goto XrPLt; r9DM5: $data["\x6d\141\x70\x65\154\163"] = $arrMapel; goto dCNlz; Us2mw: $data["\147\x75\162\x75\x73"] = $guru; goto xed0i; O69vo: if ($this->ion_auth->is_admin()) { goto aIcdh; } goto q4xsh; owof0: $this->load->view("\137\x74\x65\155\160\154\x61\164\x65\163\x2f\144\141\163\x68\x62\x6f\x61\x72\144\x2f\x5f\x68\x65\x61\x64\145\x72", $data); goto HFyzv; W8B3B: $data["\x73\155\x74"] = $this->dashboard->getSemester(); goto c70rM; idjVz: $this->load->view("\x6d\145\155\x62\145\162\163\x2f\147\165\x72\165\x2f\164\x65\x6d\x70\154\x61\x74\145\163\57\146\157\157\x74\145\162"); goto PJzeI; QPX6y: $data["\x69\x64\137\x67\x75\x72\x75"] = $guru->id_guru; goto KtU7I; d0_CJ: if (!($mapel != null)) { goto zn5zg; } goto O4o6T; omcP5: $data["\x6d\141\x70\x65\x6c\163"] = $this->dropdown->getAllMapel(); goto owof0; rOjSi: Z_etv: goto zOxoU; EKQvD: $guru = $this->dropdown->getAllGuru(); goto Us2mw; LMDiU: $data["\147\x75\x72\x75"] = $guru; goto CASBc; O4o6T: foreach ($mapel[0]->kelas_mapel as $id_mapel) { array_push($arrId, $id_mapel->kelas); A6fkv: } goto F2oqk; PJzeI: goto VhNl9; goto L0XIE; ayAwt: $data["\x74\x70"] = $this->dashboard->getTahun(); goto JCuM0; PbjdH: } public function getMateriGuru() { goto Zaxrf; Zaxrf: $id_guru = $this->input->get("\151\144", true); goto wgEZF; KW4CF: $smt = $this->dashboard->getSemesterActive(); goto GIgnN; a7_Cl: foreach ($materi as $m) { goto WrYKR; H0KtT: TYD9W: goto U0YiI; U0YiI: $arrKelasMateri[] = ["\x69\x64\x5f\x6d\x61\164\x65\162\x69" => $m->id_materi, "\151\x64\x5f\x6b\152\155" => $m->id_kjm, "\x6a\141\x64\167\x61\154" => $m->jadwal_materi, "\153\x6f\144\x65" => $m->kode_materi, "\155\141\x70\145\x6c" => $kode_mapel, "\x6b\x65\154\x61\x73" => unserialize($m->materi_kelas)]; goto kGNBj; MJ_dy: $arrKelasTugas[] = ["\151\144\x5f\155\141\x74\145\162\151" => $m->id_materi, "\x69\144\x5f\153\152\155" => $m->id_kjm, "\x6a\x61\x64\167\x61\x6c" => $m->jadwal_materi, "\153\x6f\x64\145" => $m->kode_materi, "\155\x61\160\145\x6c" => $kode_mapel, "\153\145\x6c\141\x73" => unserialize($m->materi_kelas)]; goto ZT7O6; WrYKR: $kode_mapel = $m->kode_mapel == null ? "\55\x2d" : $m->kode_mapel; goto sk1Op; kGNBj: cLHNs: goto kCRRA; kCRRA: YwJnI: goto vH3Q_; sk1Op: if ($m->jenis == "\x31") { goto TYD9W; } goto MJ_dy; ZT7O6: goto cLHNs; goto H0KtT; vH3Q_: } goto ZRq0p; wgEZF: $tp = $this->dashboard->getTahunActive(); goto KW4CF; GIgnN: $materi = $this->kelas->getAllKodeMateri($tp->id_tp, $smt->id_smt, $id_guru); goto Irzpt; Irzpt: $arrKelasMateri = []; goto rU_0V; ZRq0p: FWT2j: goto z3RzT; rU_0V: $arrKelasTugas = []; goto a7_Cl; z3RzT: $this->output_json(array("\x6d\141\164\145\x72\151" => $arrKelasMateri, "\x74\165\147\141\163" => $arrKelasTugas)); goto Rewap; Rewap: } public function getMateriMapel() { goto nDJI1; U0mPh: iqi1a: goto nub4B; HfS0E: $materi = $this->kelas->getKodeMateriMapel($tp->id_tp, $smt->id_smt, $id_mapel); goto AdNV2; AdNV2: $arrKelasMateri = []; goto iyJEF; zQCX6: $arrKelas = []; goto pn9oR; pn9oR: foreach ($materi as $m) { goto QzVFg; wlUwH: if (isset($arrKelas[$m->jenis])) { goto EmteO; } goto eKklc; E3mrP: goto w12g8; goto UNHjf; AgVfd: $arrMateri = ["\x69\144\x5f\155\141\x74\x65\x72\151" => $m->id_materi, "\x69\x64\x5f\153\x6a\x6d" => $m->id_kjm, "\x6a\141\x64\167\141\x6c" => $m->jadwal_materi, "\153\157\x64\145" => $m->kode_materi, "\x6d\141\160\x65\154" => $kode_mapel, "\147\165\162\165" => $m->nama_guru]; goto CLvuz; QzVFg: $kode_mapel = $m->kode_mapel == null ? "\x2d\x2d" : $m->kode_mapel; goto jFpgD; ogWSS: $arrKelasMateri[$m->id_kelas] = []; goto V4yZz; VhngZ: array_push($arrKelasTugas[$m->id_kelas], $arrTugas); goto b4PG9; b4PG9: goto oKRYi; goto kbfta; YhlY6: omSQ7: goto jbMM9; Hcp6X: array_push($arrKelas[$m->jenis], $m->id_kelas); goto yZm3P; d71eb: rQ133: goto f8soV; FE1JE: array_push($arrKelasMateri[$m->id_kelas], $arrMateri); goto d71eb; omn9H: iroeJ: goto CKThA; f8soV: w12g8: goto wlUwH; E2Nm6: EmteO: goto Sq0Gw; vGVVs: goto rQ133; goto BBX7b; y9_Hc: $arrTugas = ["\151\x64\x5f\x6d\141\x74\145\x72\x69" => $m->id_materi, "\151\x64\137\x6b\x6a\155" => $m->id_kjm, "\152\141\144\x77\x61\x6c" => $m->jadwal_materi, "\153\x6f\144\x65" => $m->kode_materi, "\x6d\x61\160\145\154" => $kode_mapel, "\147\165\x72\x75" => $m->nama_guru]; goto GTK41; Sq0Gw: if (in_array($m->id_kelas, $arrKelas[$m->jenis])) { goto iroeJ; } goto BV0XI; Zi4gs: oKRYi: goto E3mrP; jFpgD: if ($m->jenis == "\x31") { goto j4v2R; } goto y9_Hc; CLvuz: if (isset($arrKelasMateri[$m->id_kelas])) { goto LtZag; } goto ogWSS; BV0XI: array_push($arrKelas[$m->jenis], $m->id_kelas); goto omn9H; CKThA: z4D5B: goto YhlY6; X4XPB: $arrKelasTugas[$m->id_kelas] = []; goto VhngZ; GTK41: if (isset($arrKelasTugas[$m->id_kelas])) { goto dVMOI; } goto X4XPB; BBX7b: LtZag: goto FE1JE; yZm3P: goto z4D5B; goto E2Nm6; V4yZz: array_push($arrKelasMateri[$m->id_kelas], $arrMateri); goto vGVVs; kbfta: dVMOI: goto j5pnU; j5pnU: array_push($arrKelasMateri[$m->id_kelas], $arrTugas); goto Zi4gs; UNHjf: j4v2R: goto AgVfd; eKklc: $arrKelas[$m->jenis] = []; goto Hcp6X; jbMM9: } goto U0mPh; nDJI1: $id_mapel = $this->input->get("\x69\x64", true); goto bKGd6; nub4B: $this->output_json(array("\155\x61\x74\x65\162\x69" => $arrKelasMateri, "\x74\x75\147\x61\x73" => $arrKelasTugas, "\153\145\154\x61\x73" => $arrKelas)); goto CQoJM; bKGd6: $tp = $this->dashboard->getTahunActive(); goto iAqZk; iAqZk: $smt = $this->dashboard->getSemesterActive(); goto HfS0E; iyJEF: $arrKelasTugas = []; goto zQCX6; CQoJM: } public function loadStatus() { goto UpAij; ajcrJ: $id_kjm = $this->input->post("\x69\144\x5f\153\152\x6d", true); goto FRP10; QCDXW: if (!($info != null)) { goto f9Kvf; } goto cD3iu; vKt6Q: $info = $this->dashboard->getJadwalKbm($id_tp, $id_smt, $id_kelas); goto QCDXW; NKmaQ: $id_smt = $this->master->getSemesterActive()->id_smt; goto LwRae; cD3iu: $info->istirahat = unserialize($info->istirahat); goto K6yEx; oJqCC: $logs = $this->kelas->getStatusMateriSiswa($id_kjm); goto VWHNO; dHJur: JA54g: goto vKt6Q; UpAij: $label = $this->input->post("\x6c\141\142\x65\154", true); goto EgokK; EgokK: $id_kelas = $this->input->post("\151\x64\137\x6b\x65\154\141\x73", true); goto ajcrJ; FRP10: $id_tp = $this->master->getTahunActive()->id_tp; goto NKmaQ; h_p5z: $this->output_json(["\154\x6f\x67" => $log, "\x6a\141\x64\x77\141\154" => $info]); goto uLQGk; zm5eh: foreach ($siswa as $s) { goto zmpNq; meh9Z: G956E: goto RswR0; yWgmz: $selesai = isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->finish_time : null; goto IpPF6; IpPF6: $log[$s->id_siswa] = ["\156\141\155\x61" => $s->nama, "\156\151\x73" => $s->nis, "\153\x65\154\141\163" => $s->nama_kelas, "\154\157\147\151\x6e" => $this->kelas->getLoginSiswa($s->username), "\155\165\x6c\141\x69" => $mulai, "\x73\x65\154\x65\163\x61\x69" => $selesai, "\x74\x65\x78\x74" => isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->text : '', "\x6e\x69\154\x61\x69" => isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->nilai : '', "\143\141\x74\141\x74\x61\x6e" => isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->catatan : '', "\152\x61\155\137\x6b\145" => isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->jam_ke : null, "\152\141\x64\x77\141\154\x5f\x6d\x61\164\145\x72\x69" => isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->jadwal_materi : null, "\146\151\154\145" => isset($logs[$s->id_siswa]) && $logs[$s->id_siswa]->file != null ? unserialize($logs[$s->id_siswa]->file) : []]; goto meh9Z; zmpNq: $mulai = isset($logs[$s->id_siswa]) ? $logs[$s->id_siswa]->log_time : null; goto yWgmz; RswR0: } goto dHJur; VWHNO: $log = []; goto zm5eh; LwRae: $siswa = $this->kelas->getKelasSiswa($id_kelas, $id_tp, $id_smt); goto oJqCC; K6yEx: f9Kvf: goto h_p5z; uLQGk: } public function saveNilai() { goto jaV9H; cAw3P: $update = $this->db->update("\x6c\x6f\147\x5f\x6d\141\164\x65\162\x69", $insert); goto GUh8M; Au3K9: $update = $this->db->insert("\x6c\x6f\147\x5f\155\x61\x74\x65\x72\151", $insert); goto Ld2IL; CcaSN: $id_log = $this->input->post("\x69\144\x5f\x6c\157\147", true); goto P8tXs; DzcPU: V1uvS: goto Mns9Q; GUh8M: wLBnv: goto OoSkX; otXMJ: if ($q->num_rows() > 0) { goto V1uvS; } goto VMQtu; Mns9Q: $this->db->where("\x69\x64\137\154\157\147", $id_log); goto cAw3P; VMQtu: $this->db->set("\x69\144\x5f\x6c\157\x67", $id_log); goto Au3K9; P8tXs: $nilai = $this->input->post("\156\151\154\141\x69", true); goto nGsvg; As3i9: $insert = ["\x6e\x69\154\x61\x69" => $nilai, "\x63\x61\164\x61\x74\141\x6e" => $catatan]; goto BGMYR; cm2Kq: $q = $this->db->get("\x6c\x6f\147\x5f\x6d\141\x74\x65\x72\x69"); goto otXMJ; OoSkX: $this->output_json($update); goto mQBzu; wYo9u: $label = $this->input->post("\154\x61\x62\x65\154", true); goto CcaSN; Ld2IL: goto wLBnv; goto DzcPU; nGsvg: $catatan = $this->input->post("\x63\x61\x74\141\164\141\156", true); goto As3i9; jaV9H: $method = $this->input->post("\x6d\x65\x74\x68\x6f\144", true); goto wYo9u; BGMYR: $this->db->where("\151\144\137\x6c\157\x67", $id_log); goto cm2Kq; mQBzu: } }
